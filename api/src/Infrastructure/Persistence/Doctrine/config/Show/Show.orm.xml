<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
    https://doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="App\Domain\Model\Show\Show" table="tvshows">
        <id name="id" type="uuid" column="id">
            <generator strategy="CUSTOM"/>
            <custom-id-generator class="Symfony\Bridge\Doctrine\IdGenerator\UuidGenerator"/>
        </id>

        <field name="name" type="string" column="name" length="255">
        </field>

        <field name="summary" type="text" column="summary" nullable="true">
        </field>

        <field name="status" type="string" column="status" length="50">
            <options>
                <option name="default">in_development</option>
            </options>
        </field>

        <field name="poster" type="string" column="poster" length="255" nullable="true">
        </field>

        <field name="website" type="string" column="website" length="255" nullable="true">
        </field>

        <field name="rating" type="float" column="rating" nullable="true">
        </field>

        <field name="language" type="string" column="language" length="50" nullable="true">
        </field>

        <field name="slug" type="string" column="slug" length="255">
        </field>

        <field name="runtime" type="integer" column="runtime" nullable="true">
        </field>

        <field name="premiered" type="string" column="premiered" length="255" nullable="true">
        </field>

        <field name="idTvmaze" type="integer" column="id_tvmaze">
        </field>

        <field name="idImdb" type="integer" column="id_imdb" nullable="true">
        </field>

        <field name="idTvdb" type="integer" column="id_tvdb" nullable="true">
        </field>

        <field name="createdAt" type="datetime_immutable" column="created_at">
            <options>
                <option name="default">NOW()</option>
            </options>
        </field>

        <field name="updatedAt" type="datetime" column="updated_at" nullable="true">
            <options>
                <option name="default">NOW()</option>
            </options>
        </field>

        <many-to-one field="type" target-entity="App\Domain\Model\Show\ShowType" inversed-by="shows">
            <join-column name="show_type_id" referenced-column-name="id" nullable="false"/>
        </many-to-one>

        <many-to-many field="genres" target-entity="App\Domain\Model\Show\Genre" inversed-by="shows">
            <join-table name="shows_genres">
                <join-columns>
                    <join-column name="show_id" referenced-column-name="id"/>
                </join-columns>
                <inverse-join-columns>
                    <join-column name="genre_id" referenced-column-name="id"/>
                </inverse-join-columns>
            </join-table>
        </many-to-many>

        <one-to-many field="seasons" target-entity="App\Domain\Model\Show\Season" mapped-by="tvShow">
        </one-to-many>

        <indexes>
            <index name="shows_name" columns="name"/>
            <index name="shows_slug" columns="slug"/>
            <index name="shows_id_tvmaze" columns="id_tvmaze"/>
            <index name="shows_show_type_id" columns="show_type_id"/>
        </indexes>

        <unique-constraints>
            <unique-constraint name="shows_slug_unique_constraint" columns="slug"/>
            <unique-constraint name="shows_id_tvmaze_unique_constraint" columns="id_tvmaze"/>
        </unique-constraints>
    </entity>
</doctrine-mapping>
